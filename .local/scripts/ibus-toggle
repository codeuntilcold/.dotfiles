#!/bin/bash

if ! $(ps -e | grep -q ibus-daemon); then
  ibus-daemon --daemonize --replace
fi

current_engine=$(ibus engine)

if [ "$current_engine" == "Bamboo" ]; then
  ibus engine BambooUs
else
  ibus engine Bamboo
fi

# Signal waybar to update keyboard layout (signal 3 = SIGRTMIN+3)
if pgrep -x waybar > /dev/null; then
  pkill -RTMIN+3 waybar
fi
